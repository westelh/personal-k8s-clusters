resources:
- "../../base"

buildMetadata: [managedByLabel, originAnnotations]

patches:
- path: add-vault-ingress-notation.patch.yaml
- path: add-vault-ingress-host.patch.yaml
  target:
    kind: Application
    name: vault
- patch: |-
    apiVersion: argoproj.io/v1alpha1
    kind: Application
    metadata:
      name: argocd
      namespace: argocd
    spec:
      source:
        path: "apps/argocd/overlays/prod"
- path: add-monitoring-values.patch.yaml
  target:
    kind: Application
    name: monitoring
- path: add-sd-helm-values.patch.yaml
  target:
    kind: Application
    name: service-discovery

- path: add-vault-integration-values-path.yaml
  target:
    kind: Application
    name: vault-integration

- path: add-step-integration-values.patch.yaml
  target:
    kind: Application
    name: step-integration
